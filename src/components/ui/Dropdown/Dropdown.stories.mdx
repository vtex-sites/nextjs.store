import { Meta, Canvas, Story, ArgsTable } from '@storybook/addon-docs'

import Dropdown, { DropdownButton, DropdownMenu, DropdownItem } from '.'
import Icon from '../Icon'

import {
  TokenTable,
  TokenRow,
  TokenDivider,
} from 'src/../.storybook/components'

<Meta title="Molecules/Dropdown" component={DropdownMenu} />

export const Template = ({ id, ...args }) => (
  <Dropdown>
    <DropdownButton style={{ padding: '.5rem' }}>
      <span>Dropdown</span>
    </DropdownButton>
    <DropdownMenu {...args}>
      <DropdownItem>Dropdown Item 1</DropdownItem>
      <DropdownItem>Dropdown Item 2</DropdownItem>
      <DropdownItem>Dropdown Item 3</DropdownItem>
    </DropdownMenu>
  </Dropdown>
)

export const TemplateWithIcon = ({ id, ...args }) => (
  <Dropdown>
    <DropdownButton style={{ padding: '.5rem' }}>
      <span>Dropdown Item w/ Icon</span>
    </DropdownButton>
    <DropdownMenu {...args}>
      <DropdownItem icon={<Icon name="User" width={24} height={24} />}>
        My Account
      </DropdownItem>
      <DropdownItem icon={<Icon name="Calendar" width={24} height={24} />}>
        My Orders
      </DropdownItem>
      <DropdownItem icon={<Icon name="Gift" width={24} height={24} />}>
        Gifts
      </DropdownItem>
    </DropdownMenu>
  </Dropdown>
)

export const TemplateSmall = ({ id, ...args }) => (
  <Dropdown>
    <DropdownButton style={{ padding: '.25rem' }}>
      <span>Dropdown Small</span>
    </DropdownButton>
    <DropdownMenu size="small">
      <DropdownItem>Dropdown Item 1</DropdownItem>
      <DropdownItem>Dropdown Item 2</DropdownItem>
      <DropdownItem>Dropdown Item 3</DropdownItem>
    </DropdownMenu>
  </Dropdown>
)

export const TemplateWithIconSmall = ({ id, ...args }) => (
  <Dropdown>
    <DropdownButton style={{ padding: '.25rem' }}>
      <span>Dropdown Small Item w/ Icon</span>
    </DropdownButton>
    <DropdownMenu size="small">
      <DropdownItem
        icon={<Icon name="ArrowElbowDownRight" width={18} height={18} />}
      >
        Item 1
      </DropdownItem>
      <DropdownItem
        icon={<Icon name="ArrowElbowDownRight" width={18} height={18} />}
      >
        Item 2
      </DropdownItem>
      <DropdownItem
        icon={<Icon name="ArrowElbowDownRight" width={18} height={18} />}
      >
        Item 3
      </DropdownItem>
    </DropdownMenu>
  </Dropdown>
)

<header>

# Dropdown

Displays a set of actions/items to the user, usually used to show a menu of options.

</header>

## Overview

The `Dropdown` component uses [FastStore UI Dropdown](https://www.faststore.dev/reference/ui/molecules) as base.

<!-- Dropdown documentation is currently missing on faststore.dev -->

<Canvas>
  <Story name="overview-default">{Template.bind({})}</Story>
  <Story name="overview-default-icon">{TemplateWithIcon.bind({})}</Story>
  <Story name="overview-small">{TemplateSmall.bind({})}</Story>
  <Story name="overview-small-icon">{TemplateWithIconSmall.bind({})}</Story>
</Canvas>

---

## Usage

`import Dropdown, { DropdownButton, DropdownMenu, DropdownItem } from '../components/ui/Dropdown'`

<Canvas>
  <Story name="default">{Template.bind({})}</Story>
</Canvas>

<ArgsTable story="default" />

<TokenTable>
  <TokenRow
    token="--fs-dropdown-menu-bkg-color"
    value="var(--fs-color-tertiary-bkg)"
    isColor
  />
  <TokenRow
    token="--fs-dropdown-menu-border-radius"
    value="var(--fs-border-radius)"
  />
  <TokenRow
    token="--fs-dropdown-menu-box-shadow"
    value="var(--fs-shadow-hover)"
  />
</TokenTable>

---

## Nested Elements

### Dropdown Item

<TokenTable>
  <TokenRow token="--fs-dropdown-item-min-height" value="2.375rem" />
  <TokenRow
    token="--fs-dropdown-item-padding"
    value="var(--fs-spacing-1) var(--fs-spacing-2) var(--fs-spacing-1) var(--fs-spacing-1)"
  />
  <TokenDivider />
  <TokenRow
    token="--fs-dropdown-item-text-size"
    value="var(--fs-text-size-base)"
  />
  <TokenRow
    token="--fs-dropdown-item-text-weight"
    value="var(--fs-text-weight-regular)"
  />
  <TokenDivider />
  <TokenRow
    token="--fs-dropdown-item-color"
    value="var(--fs-color-link)"
    isColor
  />
  <TokenRow
    token="--fs-dropdown-item-bkg-color"
    value="var(--fs-color-tertiary-bkg-light)"
    isColor
  />
  <TokenRow
    token="--fs-dropdown-item-bkg-color-hover"
    value="var(--fs-color-primary-bkg-light)"
    isColor
  />
  <TokenDivider />
  <TokenRow
    token="--fs-dropdown-item-border-bottom-color"
    value="var(--fs-border-color-light)"
  />
</TokenTable>

### Dropdown Item Icon

<TokenTable>
  <TokenRow token="--fs-dropdown-item-icon-min-width" value="1.125rem" />
  <TokenRow
    token="--fs-dropdown-item-icon-margin-right"
    value="var(--fs-spacing-0)"
  />
</TokenTable>

---

## Variants

### Small

<Canvas>
  <Story name="dropdown-menu-small">{TemplateSmall.bind({})}</Story>
</Canvas>

<TokenTable>
  <TokenRow token="--fs-dropdown-item-small-min-height" value="1.75rem" />
  <TokenRow
    token="--fs-dropdown-item-small-padding"
    value="var(--fs-spacing-0) var(--fs-spacing-2) var(--fs-spacing-0) var(--fs-spacing-1)"
  />
  <TokenRow
    token="--fs-dropdown-item-small-text-size"
    value="var(--fs-text-size-1)"
  />
</TokenTable>

---

## Accessibility

### Keyboard Interactions

<section>
  <table className="sbdocs-table-free">
    <thead>
      <tr>
        <th>Key</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          <code>Enter</code>
        </td>
        <td>
          When focusing on <code>DropdownButton</code>, the Dropdown menu opens
          and focuses the first <code>DropdownItem</code>
        </td>
      </tr>
      <tr>
        <td>
          <code>ArrowDown</code>
        </td>
        <td>
          When focusing on an item, moves focus to the next{' '}
          <code>DropdownItem</code>
        </td>
      </tr>
      <tr>
        <td>
          <code>ArrowUp</code>
        </td>
        <td>
          When focusing on an item, moves focus to the previous{' '}
          <code>DropdownItem</code>
        </td>
      </tr>
      <tr>
        <td>
          <code>Escape</code>
        </td>
        <td>
          Closes <code>DropdownMenu</code> and moves focus to{' '}
          <code>DropdownButton</code>
        </td>
      </tr>
      <tr>
        <td>
          <code>Home</code>
        </td>
        <td>
          When <code>DropdownMenu</code> is open, move focus to the first{' '}
          <code>DropdownItem</code>
        </td>
      </tr>
      <tr>
        <td>
          <code>End</code>
        </td>
        <td>
          When <code>DropdownMenu</code> is open, move focus to the last{' '}
          <code>DropdownItem</code>
        </td>
      </tr>
    </tbody>
  </table>
</section>
