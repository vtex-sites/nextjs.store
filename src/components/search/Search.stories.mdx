import { Meta, Canvas, Story, ArgsTable } from '@storybook/addon-docs'
import {
  SectionList,
  SectionItem,
  TokenTable,
  TokenRow,
  TokenDivider,
} from 'src/../.storybook/components'
import { SearchHistory } from './History'
import { SearchInputProvider } from 'src/sdk/search/useSearchInput'
import { rest } from 'msw'
import { SessionProvider } from '@faststore/sdk'
import SearchDropdown from './SearchDropdown'
import SearchInput from './SearchInput'
import SuggestionProductCard from './SuggestionProductCard'
import SearchSuggestions from './SearchSuggestions'
import { SearchTop } from './SearchTop'
import { product, searchTerms, searchHistory } from 'src/../.storybook/mocks'
import { msw, products } from'./searchMock.ts'
import SearchSharedTokenTable from'./SearchSharedTokenTable.mdx'

<Meta
  title='Features/Search/Overview'
  parameters={{msw}}
/>

export const Template = (props) => (
  <div
    style={{
      maxWidth: '600px',
      height: '400px',
      margin: '0 auto',
      padding: '0 16px',
      background: 'white',
    }}
  >
    <SessionProvider>
      <SearchInput {...props} />
    </SessionProvider>
  </div>
)


<header>

# Search

This feature enables customers to set a location using a valid Postal Code.

</header>

## Overview

<Canvas>
  <Story
    name="Overview"
    parameters={{
      backgrounds: { default: 'dark' },
      msw
    }}
    args={{
      products
    }}
  >
  {Template.bind({})}
  </Story>
</Canvas>

---

<SearchSharedTokenTable />

## Components
<SessionProvider>
  <SearchInputProvider>
    <SectionList grid="grid">
      <SectionItem
        title="SearchSuggestions"
        actionPath="../?path=/docs/organisms-navbar-navlinks--overview-default"
        description={
          <>
            Displays a set navigation links and self adapts on mobile{' '}
            <code>NavbarSlider</code> or desktop screens.
          </>
        }
        containerStyle={{ overflowY: "scroll", alignItems: "flex-start" }}
      >
        <SearchSuggestions term="Ste" products={products.slice(0, 3)} terms={searchTerms} />
      </SectionItem>
      <SectionItem
        title="SearchProductCard"
        actionPath="../?path=/docs/organisms-navbar-navlinks--overview-default"
        description={
          <>
            Displays a set navigation links and self adapts on mobile{' '}
            <code>NavbarSlider</code> or desktop screens.
          </>
        }
      >
        <SuggestionProductCard product={product} />
      </SectionItem>
      <SectionItem
        title="SearchTop"
        actionPath="../?path=/docs/organisms-navbar-navlinks--overview-default"
        description={
          <>
            Displays a set navigation links and self adapts on mobile{' '}
            <code>NavbarSlider</code> or desktop screens.
          </>
        }
      >
        <SearchTop />
      </SectionItem>
    </SectionList>
    <SectionList grid="grid">
      <SectionItem
        title="SearchHistory"
        actionPath="../?path=/docs/organisms-navbar-navbarslider--overview-default"
        description={
          <>
            Displays the <code>NavLinks</code> and some features using{' '}
            <code>SlideOver</code> component.
          </>
        }
      >
        <SearchHistory history={searchHistory}/>
      </SectionItem>
      <SectionItem
        title="SearchDropdown"
        actionPath="../?path=/docs/organisms-navbar-navlinks--overview-default"
        description={
          <>
            Displays a set navigation links and self adapts on mobile{' '}
            <code>NavbarSlider</code> or desktop screens.
          </>
        }
        containerStyle={{ display: "flex", flexDirection: "column", overflowY: "scroll", justifyContent: "start" }}
      >
        <SearchDropdown history={searchHistory} />
      </SectionItem>
      <SectionItem
        title="SearchInput"
        actionPath="../?path=/docs/organisms-navbar-navlinks--overview-default"
        description={
          <>
            Displays a set navigation links and self adapts on mobile{' '}
            <code>NavbarSlider</code> or desktop screens.
          </>
        }
      >
        <SearchInput />
      </SectionItem>
    </SectionList>
  </SearchInputProvider>
</SessionProvider>
