import { Meta, Canvas, Story, ArgsTable } from '@storybook/addon-docs'
import {
  SectionList,
  SectionItem,
  TokenTable,
  TokenRow,
  TokenDivider,
} from 'src/../.storybook/components'
import { SearchInputProvider } from 'src/sdk/search/useSearchInput'
import { rest } from 'msw'
import { SessionProvider } from '@faststore/sdk'
import SearchDropdown from './SearchDropdown'
import SearchInput from './SearchInput'
import SearchProductCard from './SearchProductCard'
import SearchSuggestions from './SearchSuggestions'
import { SearchTop } from './SearchTop'
import { SearchHistory } from './SearchHistory'
import { product, searchTerms, searchHistory } from 'src/../.storybook/mocks'
import { msw, products } from'./searchMock.ts'
import SearchSharedTokenTable from'./SearchSharedTokenTable.mdx'

<Meta
  title='Features/Search/Overview'
  parameters={{msw}}
/>

export const Template = (props) => (
  <div
    style={{
      maxWidth: '600px',
      height: '400px',
      margin: '0 auto',
      padding: '0 16px',
      background: 'white',
    }}
  >
    <SessionProvider>
      <SearchInput {...props} />
    </SessionProvider>
  </div>
)


<header>

# Search

This feature permits customers find theirs search easier.



</header>

## Overview

This Search feature is based in Autocomplete.
Autocomplete is described as the functionality that displays previous search results based on current and previous searches. These results are presented in four
different lists, which can be together or separated, depending on the customer's interaction. The existing sections are:

- Last searches performed;

- Search suggestion;

- Product suggestion;

- Most searched terms.

To know more visit [Autocomplete in VTEX Intelligent Search](https://help.vtex.com/tracks/vtex-intelligent-search--19wrbB7nEQcmwzDPl1l4Cb/4gXFsEWjF7QF7UtI2GAvhL).

<Canvas>
  <Story
    name="Overview"
    parameters={{
      backgrounds: { default: 'dark' },
      msw
    }}
    args={{
      products
    }}
  >
  {Template.bind({})}
  </Story>
</Canvas>

---

<SearchSharedTokenTable />

## Components
<SessionProvider>
  <SearchInputProvider>
    <SectionList grid="grid">
      <SectionItem
        title="SearchSuggestions"
        actionPath="../?path=/docs/features-search-searchsuggestions--default-story"
        description={
          <>
            Displays a set navigation links and self adapts on mobile{' '}
            <code>NavbarSlider</code> or desktop screens.
          </>
        }
        containerStyle={{ overflowY: "scroll", alignItems: "flex-start" }}
      >
        <SearchSuggestions term="Ste" products={products.slice(0, 3)} terms={searchTerms} />
      </SectionItem>
      <SectionItem
        title="SearchProductCard"
        actionPath="../?path=/docs/features-search-searchproductcard--search-product-card"
        description={
          <>
            Card to show details of the product and suggest in search dropdown.
          </>
        }
      >
        <SearchProductCard product={product} />
      </SectionItem>
      <SectionItem
        title="SearchTop"
        actionPath="../?path=/docs/features-search-searchtop--default-story"
        description={
          <>
            This section displays the most searched terms by customers.
          </>
        }
      >
        <SearchTop />
      </SectionItem>
    </SectionList>
    <SectionList grid="grid">
      <SectionItem
        title="SearchHistory"
        actionPath="../?path=/docs/features-search-searchhistory--default-story"
        description={
          <>
            Responsible to show all history of terms researched.
          </>
        }
      >
        <SearchHistory history={searchHistory}/>
      </SectionItem>
      <SectionItem
        title="SearchDropdown"
        actionPath="../?path=/docs/features-search-searchdropdown--default-story"
        description={
          <>
            Combine SearchHistory, SearchTop and SearchSuggestions to show all options in SearchInput.
          </>
        }
        containerStyle={{ display: "flex", flexDirection: "column", overflowY: "scroll", justifyContent: "start" }}
      >
        <SearchDropdown history={searchHistory} />
      </SectionItem>
      <SectionItem
        title="SearchInput"
        actionPath="../?path=/docs/features-search-searchinput--default-story"
        description={
          <>
            Responsible to receive, search and display suggestions.
          </>
        }
      >
        <SearchInput />
      </SectionItem>
    </SectionList>
  </SearchInputProvider>
</SessionProvider>
